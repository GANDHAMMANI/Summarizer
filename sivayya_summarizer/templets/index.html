<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TextSummarizer ðŸ“„âœ¨</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.4/lottie.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>ðŸ§  TextBrief: AI Summarization Tool ðŸ“„ðŸ¤–</h1>
        <textarea id="text-input" placeholder="Enter the text to summarize..."></textarea>
        <div class="slider-container">
            <label for="num-sentences">Number of sentences in summary:</label>
            <input type="range" id="num-sentences" name="num-sentences" min="1" max="10" value="4">
            <span id="num-sentences-value">4</span>
        </div>
        <button id="summarize-button">Summarize</button>
        <div id="summary-container" style="display: none;">
            <h2>Summary:</h2>
            <pre id="summary-output"></pre>
        </div>
        <div id="animation-container"></div>
    </div>

    <script>
        document.getElementById('num-sentences').addEventListener('input', function() {
            document.getElementById('num-sentences-value').innerText = this.value;
        });

        document.getElementById('summarize-button').addEventListener('click', function() {
            const textInput = document.getElementById('text-input').value;
            const numSentences = document.getElementById('num-sentences').value;
            if (textInput.trim() === '') {
                alert('Please enter text to summarize.');
                return;
            }
            document.getElementById('summary-container').style.display = 'none';
            const animationContainer = document.getElementById('animation-container');
            animationContainer.innerHTML = '';
            const animation = bodymovin.loadAnimation({
                container: animationContainer,
                renderer: 'svg',
                loop: true,
                autoplay: true,
                path: "{{ url_for('static', filename='lottie/loading.json') }}"
            });
            fetch('/summarize', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ text: textInput, num_sentences: numSentences })
            })
            .then(response => response.json())
            .then(data => {
                animation.destroy();
                document.getElementById('summary-container').style.display = 'block';
                document.getElementById('summary-output').innerText = data.summary;
            })
            .catch(error => {
                animation.destroy();
                alert('An error occurred while summarizing the text.');
            });
        });
    </script>
</body>
</html>
